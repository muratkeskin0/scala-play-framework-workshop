@(user: models.User)(implicit flash: Flash, request: RequestHeader)
@import models.Country

@main("User Profile") {
  <div class="container">
    <div class="nav">
      <h1>User Profile</h1>
      <div class="nav-links">
        @if(user.role == models.Role.Admin) {
          <a href="@routes.HomeController.adminDashboard()">Admin Dashboard</a>
        }
        <a href="@routes.TaskController.taskList()">Task List</a>
        <a href="@routes.SocialMediaInfoController.socialMediaGuidelines()">ðŸ“± Social Media Guidelines</a>
        <a href="@routes.AuthController.logout()">Logout</a>
      </div>
    </div>

    <div class="profile-container">
      <div class="profile-section">
        <h2>Update Profile</h2>
        <div class="form-container">
          @helper.form(action = routes.UserController.updateProfile()) {
            @helper.CSRF.formField
            <div class="form-group">
              <label for="email">Email Address</label>
              <input type="email" name="email" id="email" value="@user.email" required>
            </div>
            <div class="form-group">
              <label for="country">Country</label>
              <select id="country" name="country" required>
                @for(country <- Country.allCountries) {
                  <option value="@country.value" @if(country == user.country){selected}>@country.displayName</option>
                }
              </select>
            </div>
            <button type="submit" class="btn btn-primary">Update Profile</button>
          }
        </div>
      </div>

      <div class="profile-section">
        <h2>Change Password</h2>
        <div class="form-container">
          @helper.form(action = routes.UserController.changePassword()) {
            @helper.CSRF.formField
            <div class="form-group">
              <label for="currentPassword">Current Password</label>
              <input type="password" name="currentPassword" id="currentPassword" required>
            </div>
            <div class="form-group">
              <label for="newPassword">New Password</label>
              <input type="password" name="newPassword" id="newPassword" required minlength="6">
            </div>
            <div class="form-group">
              <label for="confirmPassword">Confirm New Password</label>
              <input type="password" name="confirmPassword" id="confirmPassword" required minlength="6">
            </div>
            <button type="submit" class="btn btn-warning">Change Password</button>
          }
        </div>
      </div>

      <div class="profile-info">
        <h2>Account Information</h2>
        <div class="info-item">
          <strong>User ID:</strong> @user.id
        </div>
        <div class="info-item">
          <strong>Email:</strong> @user.email
        </div>
        <div class="info-item">
          <strong>Country:</strong> @user.country.displayName
        </div>
        <div class="info-item">
          <strong>Role:</strong> @user.role.value
        </div>
      </div>
    </div>
  </div>
}
